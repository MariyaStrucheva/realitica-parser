<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <title>Parser</title>

    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.23/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css"
          href="https://cdn.datatables.net/searchpanes/1.2.1/css/searchPanes.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/select/1.3.1/css/select.dataTables.min.css">

    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script type="text/javascript" charset="utf8"
            src="https://cdn.datatables.net/1.10.23/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" charset="utf8"
            src="https://cdn.datatables.net/searchpanes/1.2.1/js/dataTables.searchPanes.min.js"></script>
    <script type="text/javascript" charset="utf8"
            src="https://cdn.datatables.net/select/1.3.1/js/dataTables.select.min.js"></script>
</head>
<body>

<table id="table_id" class="display">
    <thead>
    <tr>
        <th>district</th>
        <th>location</th>
        <th>type</th>
        <th>bedrooms</th>
        <th>livingArea</th>
        <th>price</th>
        <th>lastModified</th>
        <th>link</th>
    </tr>
    </thead>
    <tbody>
    <tr th:each="s: ${stuns}">
        <td th:text="${s.district}"/>
        <td th:text="${s.district} + '/' + ${s.location}"/>
        <td th:text="${s.type}"/>
        <td th:text="${s.bedrooms}"/>
        <td th:text="${s.livingArea}"/>
        <td th:text="${s.price}"/>
        <td th:text="${#strings.replace(s.lastModified, ' 00:00:00.0', '')}"/>
        <td><a th:href="${s.link}" th:text="${s.realiticaId}" target="_blank"></a></td>
    </tr>
    </tbody>
</table>
<script>
    $(document).ready(function () {
        $('#table_id').DataTable({
            "paging": true,
            "lengthMenu": [100, 500, 1000],
            searchPanes: {
                // cascadePanes: true,
                viewTotal: true,
                columns: [0, 1, 2, 3],
                panes: [
                    {
                        header: 'Living aria range',
                        options: [40, 60, 80, 100, 120, 140].map(p => ({
                            label: '< ' + p,
                            value: function (rowData, rowIdx) {
                                return parseFloat(rowData[4]) < p;
                            }
                        })).concat(
                            [40, 60, 80, 100, 120, 140].map(p => ({
                                label: '> ' + p,
                                value: function (rowData, rowIdx) {
                                    return parseFloat(rowData[4]) > p;
                                }
                            }))
                        )
                    },
                    {
                        header: 'Price range',
                        options: [200, 300, 400, 500, 600, 700, 800].map(p => ({
                            label: '< ' + p,
                            value: function (rowData, rowIdx) {
                                return parseFloat(rowData[5]) < p;
                            }
                        })).concat(
                            [200, 300, 400, 500].map(p => ({
                                label: '> ' + p,
                                value: function (rowData, rowIdx) {
                                    return parseFloat(rowData[5]) > p;
                                }
                            }))
                        )
                    }
                ]
            },
            dom: 'Plfrtip'
        });

        $('#table_id tfoot th').each(function () {
            var title = $(this).text();
            $(this).html('<input type="text" placeholder="Search ' + title + '" />');
        });

        table.columns().every(function () {
            var that = this;

            $('input', this.footer()).on('keyup change', function () {
                if (that.search() !== this.value) {
                    that
                        .search(this.value)
                        .draw();
                }
            });
        });
    });

</script>
</body>
</html>
